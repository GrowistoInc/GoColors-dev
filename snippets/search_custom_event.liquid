<script>
(function () {

  let lastSearchTerm = null;

  document.addEventListener('keydown', function (e) {

    // Only ENTER key
    if (e.key !== 'Enter') return;

    const input = e.target;

    // Ensure it's a search input
    if (
      !input ||
      input.tagName !== 'INPUT' ||
      !input.name ||
      !['q', 'query', '_ss'].includes(input.name)
    ) return;

    const searchTerm = input.value.trim();
    if (!searchTerm || searchTerm === lastSearchTerm) return;

    lastSearchTerm = searchTerm;

    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
      event: 'search',
      search_term: searchTerm
    });

    console.log('âœ… GA4 search fired (ENTER)', searchTerm);

  });

});
</script>
