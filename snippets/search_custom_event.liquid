 <script>
 // ---------------------------
  // Normal Search Page Event
  // ---------------------------
  const urlParams = new URLSearchParams(window.location.search);
  const directSearchTerm = urlParams.get('q') || urlParams.get('_ss');

  if (window.location.pathname.includes('/search') && directSearchTerm) {
    gtag('event', 'search', {
      search_term: directSearchTerm
    });

    console.log("GA4 search event fired:", directSearchTerm);

    detectIncognito().then((result) => {
      let incognito_windowValue = result.isPrivate ? 1 : 0;

      gtag('event', 'search', {
        search_term: directSearchTerm,
        incognito_window: incognito_windowValue
      });

      console.log("GA4 search event + incognito:", {
        search_term: directSearchTerm,
        incognito_window: incognito_windowValue
      });
    });
  }

});
</script>