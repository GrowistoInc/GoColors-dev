{%- style -%}
  #shopify-section-{{ section.id }} {padding-block:{{ section.settings.padding_top_mob }}px {{ section.settings.padding_bottom_mob }}px;{%- if section.settings.sec-bg-color != blank -%} background:{{ section.settings.sec-bg-color }};{%- endif-%} }.collection-tabs ul{list-style: none;padding:0; margin:0;display: flex;justify-content: center;gap: 20px;}.collection-tabs ul.collection-grid-list{flex-wrap:wrap; display:none; }.collection-tabs p.sub-item__text{margin:0;}.collection-tabs ul.collection-grid-list.active{display:flex;gap: 10px;justify-content: flex-start;padding-left:15px;}.tab-button{ transition: background 0.22s cubic-bezier(.44,1.34,.38,1.11), color 0.22s cubic-bezier(.44,1.34,.38,1.11), transform 0.23s cubic-bezier(.44,1.34,.38,1.11), box-shadow 0.22s cubic-bezier(.44,1.34,.38,1.11);will-change: transform, box-shadow, background, color;position: relative;background-color: #f6f3f1;color: #000;border-radius: 25px;padding: 3px 15px;font-size: 14px;cursor: pointer;transition: background-color 0.5s ease, color 0.5s ease;white-space: nowrap;}.tab-button.active,.tab-btm-button.active{ background: #fff;color: #df2e84;box-shadow: 0 1px 4px 0 rgba(195, 106, 78, 0.13);}.collection-tabs ul.sub-coll-tab-btn {padding: 1.5rem 0 2.5rem 1.5rem;justify-content: flex-start;overflow-x: scroll;gap: 5px;}.collection-tabs h2 {margin: 0;padding-left: 1.5rem;}.collection-tabs ul.collection-grid-list li{flex: 0 0 calc(34% - 12px);}.collection-tabs ul li img{margin: 0 auto; border-radius: 7px;object-fit: cover;width:80%;height: 100%;margin-bottom:10px;}.collection-tabs ul li a.sub-text_link {display: flex;flex-direction: column;}.collection-tabs p.sub-item__text {margin: 0; font-size: 10px;padding: 0 5px 5px;line-height: normal;}.tab-btm-button{display:none;} .tab-btm-button.active{display:block;width:fit-content;padding:5px 40px;margin:3rem auto 0}li.tab-button.active[data-tab='end-of-season-sale'],li.tab-button[data-tab='end-of-season-sale']:hover  {background-color: red; color: #fff;}
    @media screen and (min-width: 767px) {.collection-tabs ul.collection-grid-list li{ flex: 0 0 calc(25% - 20px);}.collection-tabs ul.collection-grid-list.active{gap:20px}.collection-tabs h2 , .collection-tabs ul.collection-grid-list {padding-left:25px;}}
  @media screen and (min-width: 1200px) {.collection-tabs h2{padding-left: 3rem;}#shopify-section-{{ section.id }} {padding-block: {{ section.settings.padding_top }}px  {{ section.settings.padding_bottom }}px;}.tab-button.active{ transform: scale(1.10);}.collection-tabs ul.collection-grid-list li{flex: 0 0 calc(16% - 16px); text-align: center; cursor: pointer; }.tab-button:hover{} .tab-button:hover{ background: #fff8f3;color: #df2e84;transform: scale(1.07) translateY(0px); box-shadow: 0 4px 14px 0 rgba(195, 106, 78, 0.21), 0 1.5px 6px rgba(195, 106, 78, 0.14); outline: none;}.collection-tabs ul li img{ transition: transform 0.21s cubic-bezier(.41,1.51,.37,1.11), box-shadow 0.22s cubic-bezier(.41,1.51,.37,1.11);will-change: transform, box-shadow;max-width: 220px;margin-bottom:16px;}.collection-tabs ul.collection-grid-list.active{gap: 35px 20px;padding-left:3rem;}.collection-tabs  ul li:hover img{transform: scale(1.045) rotateZ(-0.2deg);box-shadow: 0 10px 28px 0 rgba(195, 106, 78, 0.21), 0 2px 8px rgba(195, 106, 78, 0.13);}.collection-tabs p.sub-item__text{font-size:16px;padding: 0;}.collection-tabs ul.sub-coll-tab-btn {padding: 2rem 0 3rem 3rem;gap: 20px;}.tab-btm-button.active{padding:8px 90px;margin:5rem auto 0}}
{%- endstyle -%}

{% if section.settings.sec-heading != blank %}
<h2>{{ section.settings.sec-heading }}</h2>
{% endif %}

<div class="collection-tabs">
  <!-- TAB NAV -->
  {% assign tab_blocks = section.blocks | where: "type", "tab" %}
  <ul class="sub-coll-tab-btn ">
    {% for block in tab_blocks %}
        <li
          class="tab-button {% if forloop.first %} active{% endif %}"
          data-tab="{{ block.settings.tab_title | handleize }}">
          {{ block.settings.tab_title }}
        </li>
    {% endfor %}
  </ul>

  <!-- TAB CONTENT -->
  {% for tab in tab_blocks %}
 

      <ul class="collection-grid-list {% if forloop.first %} active {% endif %}"
          id="{{ tab.settings.tab_title | handleize }}">

        {% assign current_handle = tab.settings.tab_title | handleize %}

        {% for item in section.blocks %}
          {% if item.type == 'item'
            and item.settings.parent_tab == current_handle %}

            <li>
              <a href="{{ item.settings.link }}" class="sub-text_link">
                <img
                  src="{{ item.settings.image | img_url: '550x550' }}"
                  alt="{{ item.settings.text }}"
                  width="100%"
                  height="293">

                {% if item.settings.text != blank %}
                  <p class="sub-item__text">{{ item.settings.text }}</p>
                {% endif %}
              </a>
            </li>

          {% endif %}
        {% endfor %}

      </ul>


  {% endfor %}
</div>
<script>
{% comment %} document.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll(".collection-tabs .tab-button");
  const grids = document.querySelectorAll(".collection-tabs .collection-grid-list");
  if (!tabs.length) return;
  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      const activeTab = tab.dataset.tab;

      // Toggle active button
      tabs.forEach(btn => btn.classList.remove("active"));
      tab.classList.add("active");

      // Show correct grid
      grids.forEach(grid => {
        grid.classList.toggle("active", grid.id === activeTab);
      });

    });
  });

}); {% endcomment %}

document.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll(".sub-col-tab-btn .tab-button");
  const grids = document.querySelectorAll(".collection-grid-list");

  if (!tabs.length) return;

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      const activeTab = tab.dataset.tab;

      tabs.forEach(btn => btn.classList.remove("active"));
      tab.classList.add("active");

      grids.forEach(grid => {
        grid.classList.toggle("active", grid.id === activeTab);
      });
    });
  });
});

</script>

{% schema %}
{
  "name":"Collection Tabs List New",
  "class":"collection-tabs",

  "settings":[
    {
      "type":"text",
      "id":"sec-heading",
      "label":"Section title"
    },
    {
      "type":"color",
      "id":"sec-bg-color",
      "label":"Background color"
    },
    {
      "type":"range",
      "id":"padding_top",
      "min":0,
      "max":100,
      "step":2,
      "unit":"px",
      "label":"Padding top",
      "default":0
    },
    {
      "type":"range",
      "id":"padding_bottom",
      "min":0,
      "max":100,
      "step":2,
      "unit":"px",
      "label":"Padding bottom",
      "default":0
    },
    {
      "type":"range",
      "id":"padding_top_mob",
      "min":0,
      "max":100,
      "step":2,
      "unit":"px",
      "label":"Padding top Mobile",
      "default":0
    },
    {
      "type":"range",
      "id":"padding_bottom_mob",
      "min":0,
      "max":100,
      "step":2,
      "unit":"px",
      "label":"Padding bottom Mobile",
      "default":0
    }
  ],

  "blocks":[
    {
      "type":"tab",
      "name":"Tab",
      "settings":[
        {
          "type":"text",
          "id":"tab_title",
          "label":"Tab title"
        }
      ]
    },
    {
      "type":"item",
      "name":"Tab Item",
      "settings":[
        {
          "type":"text",
          "id":"parent_tab",
          "label":"Parent tab handle",
          "info":"Must match Tab title handle (eg: best-sellers)"
        },
        {
          "type":"image_picker",
          "id":"image",
          "label":"Image"
        },
        {
          "type":"url",
          "id":"link",
          "label":"Link"
        },
        {
          "type":"text",
          "id":"text",
          "label":"Text"
        }
      ]
    }
  ],

  "presets":[
    {
      "name":"Collection Tabs List New"
    }
  ]
}

{% endschema %}