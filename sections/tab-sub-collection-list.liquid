{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top_mob }}px;
    padding-bottom: {{ section.settings.padding_bottom_mob }}px;
  }
  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
    /* .sub-tab-contents.active li.swiper-slide {
      min-width: calc(100% / 5);
    } */
  }
 
{%- endstyle -%}
<div class="sub-tab-section section-{{ section.id }}-padding" style="background:{{ section.settings.sec-bg-color }};">
  <div class="sub-tab-coll-contentss">
    <h2 class="">{{ section.settings.sec-heading }}</h2>
      <div class="sub-coll-tab-btn">
      {%- for block in section.blocks -%}
      {% if block.settings.tab-title != blank %}
        <button class="main-tab-button {% if forloop.first %}active{% endif %}" data-tab="{{ block.settings.tab-title | handleize }}">{{ block.settings.tab-title }}</button>
      {% endif %}  
      {%- endfor -%}
      </div>
  </div>
  <div class="sub-tab-coll-contentss">
{%- for block in section.blocks -%}
    <div class="sub-tab-contents {% if forloop.first %}active{% endif %}" id="{{ block.settings.tab-title | handleize }}">
      <div class="swiper coll-product hm-sub-collection-slider">
          <div class="swiper-wrapper">
              {% assign total_images = 0 %}
              {% for question in (1..20) %}
                 {% assign block_size = question.size %}
                {%- assign textNum = 'textNumbers' | append: forloop.index -%}
                {%- assign linkNum = 'linkNumbers' | append: forloop.index -%}
                {%- assign imageNum = 'imageNumbers' | append: forloop.index -%}
                    {% if block.settings[imageNum] != blank %}
                        {% assign total_images = total_images | plus: 1 %}
                        <li class="swiper-slide">
                        <a href="{{block.settings[linkNum]}}" class="sub-text_link" {{ total_images }}>
                            <div class="sub-img-box">
                              <img class="sub-ct-img" src="{{ block.settings[imageNum] | img_url: '550x550' }}" width="100%" height="550" alt="{{ shop.name }}" />
                            </div> 
                          {% if block.settings[textNum] != blank %}                       
                                <p class="sub-item__text">{{block.settings[textNum]}}</p>
                          {% endif %}
                           </a>
                        </li>
                      {% endif %}
                {% endfor %}
            </div>
        <div class="looking-swiper-next"> </div>
        <div class="looking-swiper-prev"> </div>
      </div>
    </div>  
    {% if total_images < 6 %}
    <style>
      .coll-product.hm-sub-collection-slider.swiper.swiper-initialized.swiper-horizontal.swiper-backface-hidden {
          margin-left: 0;
      }
      @media (min-width: 1024px){
        #{{ block.settings.tab-title | handleize }} .swiper-slide{
          width: 329px !important;
        }
      }
      @media (min-width: 990px) and (max-width: 1023px){
        #{{ block.settings.tab-title | handleize }} .swiper-slide{
          width: calc(23% - 3px) !important;
        }
      }
      @media (max-width: 989px){
        #{{ block.settings.tab-title | handleize }} .swiper-slide{
          width: calc(50% - 5px) !important;
        }
      }
    </style>
      {% endif %}
  {%- endfor -%}
  </div>
</div>

<script>
  document.querySelectorAll('.main-tab-button').forEach(button => {
  button.addEventListener('click', () => {
    const tabName = button.getAttribute('data-tab');
    // Update active button
    document.querySelectorAll('.main-tab-button').forEach(btn => btn.classList.remove('active'));
    button.classList.add('active');
    // Update active content
    document.querySelectorAll('.sub-tab-contents').forEach(content => content.classList.remove('active'));
    document.getElementById(tabName).classList.add('active');
  });
  });
  $(document).ready(function(){
    var swiper = new Swiper(".hm-sub-collection-slider", {
    slidesPerView: 2, 
    mousewheel: false,
    speed: 800,
       navigation: {
          nextEl: ".looking-swiper-next",
          prevEl: ".looking-swiper-prev",
    },
    breakpoints: {
      220: {
        slidesPerView: 2,
        spaceBetween: 10,
      },
      768: {
        slidesPerView: 2,
        spaceBetween: 10,
      },
      990: {
        slidesPerView: 4.2,
        spaceBetween: 15,
      },
      1024: {
        slidesPerView: 5.5,
        spaceBetween: 15,
      }
    },
  });
  });
</script>

{% schema %}
  {
    "name": "Sub collection slider",
    "settings": [
      {
        "type": "text",
        "id": "sec-heading",
        "label": "section title"
      },
      {
        "type": "color",
        "id": "sec-bg-color",
        "label": "Background color"
      },
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Padding top",
        "default": 0
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Padding bottom",
        "default": 0
      }, 
      {
        "type": "range",
        "id": "padding_top_mob",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Padding top Mobile",
        "default": 0
      },
      {
        "type": "range",
        "id": "padding_bottom_mob",
        "min": 0,
        "max": 100,
        "step": 2,
        "unit": "px",
        "label": "Padding bottom Mobile",
        "default": 0
      }
    ],
    "blocks":[
          {
      "type": "image",
      "name": "Image Block",
      "settings": [
        {
          "type": "text",
          "id": "tab-title",
          "label": "Tab title"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers1",
          "label": "Image 1"
        },
        {
          "type": "url",
          "id": "linkNumbers1",
          "label": "Link 1"
        },
        {
          "type": "text",
          "id": "textNumbers1",
          "label": "Text 1"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers2",
          "label": "Image 2"
        },
        {
          "type": "url",
          "id": "linkNumbers2",
          "label": "Link 2"
        },
        {
          "type": "text",
          "id": "textNumbers2",
          "label": "Text 2"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers3",
          "label": "Image 3"
        },
        {
          "type": "url",
          "id": "linkNumbers3",
          "label": "Link 3"
        },
        {
          "type": "text",
          "id": "textNumbers3",
          "label": "Text 3"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers4",
          "label": "Image 4"
        },
        {
          "type": "url",
          "id": "linkNumbers4",
          "label": "Link 4"
        },
        {
          "type": "text",
          "id": "textNumbers4",
          "label": "Text 4"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers5",
          "label": "Image 5"
        },
        {
          "type": "url",
          "id": "linkNumbers5",
          "label": "Link 5"
        },
        {
          "type": "text",
          "id": "textNumbers5",
          "label": "Text 5"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers6",
          "label": "Image 6"
        },
        {
          "type": "url",
          "id": "linkNumbers6",
          "label": "Link 6"
        },
        {
          "type": "text",
          "id": "textNumbers6",
          "label": "Text 6"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers7",
          "label": "Image 7"
        },
        {
          "type": "url",
          "id": "linkNumbers7",
          "label": "Link 7"
        },
        {
          "type": "text",
          "id": "textNumbers7",
          "label": "Text 7"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers8",
          "label": "Image 8"
        },
        {
          "type": "url",
          "id": "linkNumbers8",
          "label": "Link 8"
        },
        {
          "type": "text",
          "id": "textNumbers8",
          "label": "Text 8"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers9",
          "label": "Image 9"
        },
        {
          "type": "url",
          "id": "linkNumbers9",
          "label": "Link 9"
        },
        {
          "type": "text",
          "id": "textNumbers9",
          "label": "Text 9"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers10",
          "label": "Image 10"
        },
        {
          "type": "url",
          "id": "linkNumbers10",
          "label": "Link 10"
        },
        {
          "type": "text",
          "id": "textNumbers10",
          "label": "Text 10"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers11",
          "label": "Image 11"
        },
        {
          "type": "url",
          "id": "linkNumbers11",
          "label": "Link 11"
        },
        {
          "type": "text",
          "id": "textNumbers11",
          "label": "Text 11"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers12",
          "label": "Image 12"
        },
        {
          "type": "url",
          "id": "linkNumbers12",
          "label": "Link 12"
        },
        {
          "type": "text",
          "id": "textNumbers12",
          "label": "Text 12"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers13",
          "label": "Image 13"
        },
        {
          "type": "url",
          "id": "linkNumbers13",
          "label": "Link 13"
        },
        {
          "type": "text",
          "id": "textNumbers13",
          "label": "Text 13"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers14",
          "label": "Image 14"
        },
        {
          "type": "url",
          "id": "linkNumbers14",
          "label": "Link 14"
        },
        {
          "type": "text",
          "id": "textNumbers14",
          "label": "Text 14"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers15",
          "label": "Image 15"
        },
        {
          "type": "url",
          "id": "linkNumbers15",
          "label": "Link 15"
        },
        {
          "type": "text",
          "id": "textNumbers15",
          "label": "Text 15"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers16",
          "label": "Image 16"
        },
        {
          "type": "url",
          "id": "linkNumbers16",
          "label": "Link 16"
        },
        {
          "type": "text",
          "id": "textNumbers16",
          "label": "Text 16"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers17",
          "label": "Image 17"
        },
        {
          "type": "url",
          "id": "linkNumbers17",
          "label": "Link 17"
        },
        {
          "type": "text",
          "id": "textNumbers17",
          "label": "Text 17"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers18",
          "label": "Image 18"
        },
        {
          "type": "url",
          "id": "linkNumbers18",
          "label": "Link 18"
        },
        {
          "type": "text",
          "id": "textNumbers18",
          "label": "Text 18"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers19",
          "label": "Image 19"
        },
        {
          "type": "url",
          "id": "linkNumbers19",
          "label": "Link 19"
        },
        {
          "type": "text",
          "id": "textNumbers19",
          "label": "Text 19"
        },
        {
          "type": "image_picker",
          "id": "imageNumbers20",
          "label": "Image 20"
        },
        {
          "type": "url",
          "id": "linkNumbers20",
          "label": "Link 20"
        },
        {
          "type": "text",
          "id": "textNumbers20",
          "label": "Text 20"
        },
      ],
     }
    ],
    "presets": [
      {
      "name": "Sub collection slider"
      }
    ]
  }
{% endschema %}