{% style %}
#shopify-section-{{ section.id }} {
  padding: 60px 0;
}

.stl-wrap {
  display: grid;
  grid-template-columns: 1.7fr 1fr;
  gap: 60px;
  align-items: center;
}

@media(max-width: 980px){
  .stl-wrap{
    grid-template-columns:1fr;
  }
}

/* ---------------- LEFT HERO IMAGE ---------------- */

.stl-image-slide img {
  width: 100%;
  border-radius: 4px;
}

/* ---------------- RIGHT PRODUCT CARD ---------------- */

.stl-products {
  position: relative;
}

.stl-title {
  font-size: 22px;
  letter-spacing: 1px;
}

.stl-subtitle {
  font-size: 13px;
  opacity:.7;
  margin-bottom: 24px;
}

/* product card */
.product-card {
  max-width: 280px;
}

.product-card img {
  width: 100%;
}

.product-title {
  font-size: 14px;
  margin-top: 12px;
}

.product-price {
  color:#b58a4e;
  margin-top: 6px;
  font-weight: 600;
}

.swiper-pagination-bullets{
  margin-top:12px;
}

/* arrows */
.stl-arrow {
  color:black;
}

.for-her-label{
  position:absolute;
  right:-64px;
  top:50%;
  transform:rotate(90deg) translateY(-50%);
  opacity:.12;
  letter-spacing:3px;
  font-size:48px;
  pointer-events:none;
}


{% endstyle %}

<div class="stl-wrap">

  <!-- ------------------ LEFT IMAGE SLIDER ------------------ -->
  <div class="stl-hero">

    <div class="swiper stl-img-swiper">
      <div class="swiper-wrapper">

      {% for block in section.blocks %}
        <div class="swiper-slide">
          <div class="stl-image-slide">
            {{ block.settings.look_image | image_url: width: 1200 | image_tag }}
          </div>
        </div>
      {% endfor %}

      </div>
    </div>

  </div>


  <!-- ------------------ RIGHT PRODUCT SLIDER ------------------ -->
  <div class="stl-products">

    {% if section.settings.heading != blank %}
      <div class="stl-title">{{ section.settings.heading }}</div>
    {% endif %}
    
    {% if section.settings.subheading != blank %}
      <div class="stl-subtitle">{{ section.settings.subheading }}</div>   
    {% endif %}

    <div class="swiper stl-product-swiper">
      <div class="swiper-wrapper">

        {% for block in section.blocks %}
        {% assign product = all_products[block.settings.product] %}

        <div class="swiper-slide">

          <div class="product-card">
            <a href="{{ product.url }}">
              {{ product.featured_image | image_url: width: 500 | image_tag }}
            </a>

            <div class="product-title">
              {{ product.title | truncate: 46 }}
            </div>

            <div class="product-price">
              {{ product.price | money }}
            </div>

          </div>

        </div>

        {% endfor %}
      </div>

      <div class="swiper-pagination"></div>

      <div class="swiper-button-prev stl-arrow"></div>
      <div class="swiper-button-next stl-arrow"></div>

    </div>

    <div class="for-her-label">
      FORMAL WEAR
    </div>

  </div>
</div>


<script>

document.addEventListener('DOMContentLoaded', () => {

  const heroSlider = new Swiper('.stl-img-swiper', {
    effect:'fade',
    fadeEffect:{ crossFade:true },
    slidesPerView:1,
    allowTouchMove:true
  });

  const productSlider = new Swiper('.stl-product-swiper', {

    slidesPerView: 1,
    loop:true,
    spaceBetween: 24,

    pagination: {
      el: '.stl-product-swiper .swiper-pagination',
      clickable:true
    },

    navigation: {
      prevEl: '.stl-product-swiper .swiper-button-prev',
      nextEl: '.stl-product-swiper .swiper-button-next'
    }

  });

  // ðŸ”¥ Sync sliders
  heroSlider.controller.control = productSlider;
  productSlider.controller.control = heroSlider;

});

</script>


{% schema %}
{
  "name": "Shop The Look Slider",
  "settings": [

    {
      "type": "text",
      "id": "heading",
      "label": "Title",
      "default": "PERFECTLY PAIRED"
    },

    {
      "type": "text",
      "id": "subheading",
      "label": "Sub title",
      "default": "Exclusive shirt combos & curated looks"
    }

  ],

  "blocks": [
    {
      "type": "look",
      "name": "Look + Product",
      "settings": [

        {
          "type": "image_picker",
          "id": "look_image",
          "label": "Look Image"
        },

        {
          "type": "product",
          "id": "product",
          "label": "Linked Product"
        }
      ]
    }
  ],

  "presets": [
    {
      "name": "Shop The Look"
    }
  ]
}
{% endschema %}
