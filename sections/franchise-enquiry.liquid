<style>
/* Container */
form#franchiseForm {
  display: flex;
  flex-direction: column;
  gap: 2rem;
  font-family: 'Arial', sans-serif;
  color: #333;
  max-width: 100%;
}
/* Left & Right sides */
.left-side, .right-side {
  flex: 1;
}
/* Labels */
.form-group label {
  display: block;
  font-weight: 500;
  margin-bottom: 8px;
  line-height: normal;
}
.form-group label span {
  color: red;
}
.left-side ,.right-side{
    display: flex;
    flex-direction: column;
    gap: 15px;
}
/* Input, textarea, select */
.left-side input,
.left-side textarea,
.left-side select,
.businessWebsite,
input.carpet_area[type="file"] , input.carpet_area,
.right-side .form-group.upload_img label[for="storeImage"]{
  width: 100%;
  padding: 10px 14px;
  border: 1px solid #ccc;
  border-radius: 8px;
  font-size: 14px;
  outline: none;    
  margin: 0;
  transition: border-color 0.2s ease;
}
.error{color:red;display: block;}
input.carpet_area{ width:80%;}
.left-side input:focus,
.left-side textarea:focus,
.left-side select:focus,
.businessWebsite:focus {
  border-color: #222;
}
.radio-group input[type="radio"] {
  display: none;
}
input.businessWebsite {
    width: 60%;border: 1px solid #c2c2c22e;
    background-color: #c2c2c22e;
    border-radius: 50px;
    margin: 10px 0 0;
    padding: 6px 20px;
}
.right-side .form-group .radio-group label {
  border: 2px solid #000;
  border-radius: 20px;
  padding: 4px 20px;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
  margin: 0 0;
}
.right-side .form-group label {
    margin-bottom: 13px;
}
.radio-group input[type="radio"]:checked + label {
  background: #000;
  color: #fff;
  border-color: #000;
}
.radio-group {
    display: flex;
    gap:10px;
    align-items:center;
}
.checkbox-group label {
  display: block;
  margin-bottom: 6px;
  cursor: pointer;
}
.checkbox-group input[type="radio"] {
  visibility: hidden;position:absolute;    
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    margin: 0;
}
.right-side .form-group .checkbox-group label {
    margin: 0;
    position: relative;
    border: 2px solid #000;
    border-radius: 50px;
    padding: 4px 20px;
}
input[type="file"] {
  display: none;
}
.form-group svg {
  width: 20px;
  height: 20px;
  margin-right: 8px;
  vertical-align: middle;
}
.submit-btn button {
  background: #fff;
  border: 2px solid #000;
  border-radius: 25px;
  padding: 5px 30px;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
}
.submit-btn button:hover {
  background: #000;
  color: #fff;
}
.checkbox-group {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}
.right-side .form-group .checkbox-group label.active {
    background-color: #000;
    color: #fff;transition: all 0.2s ease;
}
.thankyou {
    text-align: center;
    margin: 3rem auto 3rem;
}
.thankyou h2 {
    font-size: 18px;
    margin: 0;
}
@media screen and (min-width:1200px){
   .checkbox-group {width: 80%;}
    form#franchiseForm {
      flex-direction: row;
      gap: 120px;        
      margin: 4rem 0 10rem;
    }
    .left-side {
      display: grid;
      grid-template-columns: 1fr 1fr;
      column-gap: 20px;
      row-gap: 34px;position: relative;
    }
    .right-side {
      flex: 1;
      gap: 34px;
    }
    .left-side::after {content: "";width: 1px;height: 100%;border-right: 1px solid #C2C2C2;display: block;position: absolute;right: -60px;}
  .submit-btn button {padding: 5px 30px;}
  .thankyou { margin: 6rem auto 6rem;}
  .thankyou h2{font-size:22px;}
}
</style>
<h2 class="page-heading"> Franchise Enquiry</h2>
<form id="franchiseForm" class="form-container" enctype="multipart/form-data" novalidate>
  
  <div class="left-side">
    <div class="form-group">
      <label>First name <span>*</span></label>
      <input type="text" name="first_name" placeholder="First name" required>
      <small class="error hidden">Please enter first name.</small>
    </div>
    <div class="form-group">
      <label>Last name <span>*</span></label>
      <input type="text" name="last_name" placeholder="Last name" required>
      <small class="error hidden">Please enter last name.</small>
    </div>
    <div class="form-group" style="grid-column: span 2;">
      <label>Address <span>*</span></label>
      <textarea name="address" placeholder="Address" required></textarea>
      <small class="error hidden">Please enter address.</small>
    </div>
    <div class="form-group">
      <label>Select State <span>*</span></label>
      <select name="state" id="state">
        <option value="">Select State</option>
        <option value="Andhra Pradesh">Andhra Pradesh</option>
        <option value="Arunachal Pradesh">Arunachal Pradesh</option>
        <option value="Assam">Assam</option>
        <option value="Bihar">Bihar</option>
        <option value="Chhattisgarh">Chhattisgarh</option>
        <option value="Goa">Goa</option>
        <option value="Gujarat">Gujarat</option>
        <option value="Haryana">Haryana</option>
        <option value="Himachal Pradesh">Himachal Pradesh</option>
        <option value="Jharkhand">Jharkhand</option>
        <option value="Karnataka">Karnataka</option>
        <option value="Kerala">Kerala</option>
        <option value="Madhya Pradesh">Madhya Pradesh</option>
        <option value="Maharashtra">Maharashtra</option>
        <option value="Manipur">Manipur</option>
        <option value="Meghalaya">Meghalaya</option>
        <option value="Mizoram">Mizoram</option>
        <option value="Nagaland">Nagaland</option>
        <option value="Odisha">Odisha</option>
        <option value="Punjab">Punjab</option>
        <option value="Rajasthan">Rajasthan</option>
        <option value="Sikkim">Sikkim</option>
        <option value="Tamil Nadu">Tamil Nadu</option>
        <option value="Telangana">Telangana</option>
        <option value="Tripura">Tripura</option>
        <option value="Uttar Pradesh">Uttar Pradesh</option>
        <option value="Uttarakhand">Uttarakhand</option>
        <option value="West Bengal">West Bengal</option>
      </select>
      <small id ="stateError" class="error hidden">Please select state.</small>
    </div>
    <div class="form-group">
      <label>Select District <span>*</span></label>
      <select name="district" id="districtSelect" required>
      <option value="">Select District</option>
  </select>
      <small class="error hidden">Please select district.</small>
    </div>
    <div class="form-group">
      <label>Postal Code <span>*</span></label>
      <input type="text" name="postal_code" placeholder="Postal Code" onkeypress="return /[0-9]/i.test(event.key)" pattern="[0-9]{6}" required minlength="6" maxlength="6">
      <small class="error hidden">Please enter 6 digit pincode.</small>
    </div>
    <div class="form-group">
      <label>Email Address <span>*</span></label>
      <input type="email" name="email" placeholder="Email Address" required>
      <small class="error hidden">Please enter valid email address</small>
    </div>
    <div class="form-group">
      <label>Mobile Number <span>*</span></label>
      <input type="tel" name="mobile_number" placeholder="Mobile Number" onkeypress="return /[0-9]/i.test(event.key)" pattern="[0-9]{10}" required minlength="10" maxlength="10" required>
      <small class="error hidden">Please enter valid 10 digit phone number.</small>
    </div>
  </div>
  
  <div class="right-side">
    <div class="form-group">
      <label>Do you have a store location? <span>*</span></label>
      <div class="radio-group">
        <input type="radio" id="yes" name="has_store" value="1" required>
        <label for="yes">Yes</label>
        <input type="radio" id="no" name="has_store" value="0" required>
        <label for="no">No</label>
      </div>
      <small class="error hidden">Please select one of these options.</small>
    </div>
    
    <div class="form-group">
      <label>Carpet area in sq.ft of the store</label>
      <input type="text" placeholder="Enter carpet area in sq.ft" name="carpet_area" class="carpet_area">
    </div>
    
    <div class="form-group" style="grid-column: span 2;">
      <label>Where did you hear about gocolors franchise store? <span>*</span></label>
      <div class="checkbox-group">
        <label><input type="radio" name="heard_from" value="On Website" required> On Website</label>
        <label><input type="radio" name="heard_from" value="Friend/Relative Owns One"> Friend/Relative Owns One</label>
        <label><input type="radio" name="heard_from" value="Have Seen Gocolors Franchise Stores"> Have Seen Gocolors Franchise Stores</label>
        <label><input type="radio" name="heard_from" value="Business Website (Specify)"> Business Website (Specify)</label>
      </div>
      <input type="text" class="businessWebsite hidden" name="heard_from_custom" placeholder="Enter Business Website Here (if chosen)">
      <small class="error hidden">Please select one of these options.</small>
    </div>
    
   <div class="form-group upload_img" style="grid-column: span 2;">
  <label>Images of store/location <span>*</span></label>
  <input type="file" id="storeImage" name="image[]" accept="image/*" multiple required>
  <label for="storeImage" style="cursor:pointer;display:inline-flex;align-items:center;">
    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
      <path d="M3.66699 6.63005L9.00017 1.29688L14.3333 6.63005" stroke="black" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
      <path d="M9 11.9632V1.29688" stroke="black" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
      <path d="M16.9995 14.6309V17.2974H1V14.6309" stroke="black" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
    </svg> upload images (jpg, png, jpeg)
  </label>
  <span id="fileName" style="display:block;margin-top:5px;font-size:14px;"></span>
  <small class="error hidden">Please upload at least one image</small>
</div>
 <div class="submit-btn">
    <button type="submit">Submit</button>
  </div>
</div>
</form>
<div class="thankyou hidden">
<h2>✅ Form submitted successfully!</h2>
</div>
{% comment %} <script>
  const stateDistrictData = [
    {state:"Andhra Pradesh", districts:["Anantapur","Chittoor","East Godavari","Guntur","Krishna","Kurnool","Nellore","Prakasam","Srikakulam","Visakhapatnam","Vizianagaram","West Godavari","YSR Kadapa"]},
    {state:"Arunachal Pradesh", districts:["Tawang","West Kameng","East Kameng","Papum Pare","Kurung Kumey","Kra Daadi","Lower Subansiri","Upper Subansiri","West Siang","East Siang","Siang","Upper Siang","Lower Siang","Lower Dibang Valley","Dibang Valley","Anjaw","Lohit","Namsai","Changlang","Tirap","Longding"]},
    {state:"Assam", districts:["Baksa","Barpeta","Biswanath","Bongaigaon","Cachar","Charaideo","Chirang","Darrang","Dhemaji","Dhubri","Dibrugarh","Goalpara","Golaghat","Hailakandi","Hojai","Jorhat","Kamrup Metropolitan","Kamrup","Karbi Anglong","Karimganj","Kokrajhar","Lakhimpur","Majuli","Morigaon","Nagaon","Nalbari","Dima Hasao","Sivasagar","Sonitpur","South Salmara-Mankachar","Tinsukia","Udalguri","West Karbi Anglong"]},
    {state:"Bihar", districts:["Araria","Arwal","Aurangabad","Banka","Begusarai","Bhagalpur","Bhojpur","Buxar","Darbhanga","East Champaran (Motihari)","Gaya","Gopalganj","Jamui","Jehanabad","Kaimur (Bhabua)","Katihar","Khagaria","Kishanganj","Lakhisarai","Madhepura","Madhubani","Munger (Monghyr)","Muzaffarpur","Nalanda","Nawada","Patna","Purnia (Purnea)","Rohtas","Saharsa","Samastipur","Saran","Sheikhpura","Sheohar","Sitamarhi","Siwan","Supaul","Vaishali","West Champaran"]},
    {state:"Chhattisgarh", districts:["Balod","Baloda Bazar","Balrampur","Bastar","Bemetara","Bijapur","Bilaspur","Dantewada (South Bastar)","Dhamtari","Durg","Gariyaband","Janjgir-Champa","Jashpur","Kabirdham (Kawardha)","Kanker (North Bastar)","Kondagaon","Korba","Korea (Koriya)","Mahasamund","Mungeli","Narayanpur","Raigarh","Raipur","Rajnandgaon","Sukma","Surajpur","Surguja"]},
    {state:"Goa", districts:["North Goa","South Goa"]},
    {state:"Gujarat", districts:["Ahmedabad","Amreli","Anand","Aravalli","Banaskantha (Palanpur)","Bharuch","Bhavnagar","Botad","Chhota Udepur","Dahod","Dangs (Ahwa)","Devbhoomi Dwarka","Gandhinagar","Gir Somnath","Jamnagar","Junagadh","Kachchh","Kheda (Nadiad)","Mahisagar","Mehsana","Morbi","Narmada (Rajpipla)","Navsari","Panchmahal (Godhra)","Patan","Porbandar","Rajkot","Sabarkantha (Himmatnagar)","Surat","Surendranagar","Tapi (Vyara)","Vadodara","Valsad"]},
    {state:"Haryana", districts:["Ambala","Bhiwani","Charkhi Dadri","Faridabad","Fatehabad","Gurgaon","Hisar","Jhajjar","Jind","Kaithal","Karnal","Kurukshetra","Mahendragarh","Mewat","Palwal","Panchkula","Panipat","Rewari","Rohtak","Sirsa","Sonipat","Yamunanagar"]},
    {state:"Himachal Pradesh", districts:["Bilaspur","Chamba","Hamirpur","Kangra","Kinnaur","Kullu","Lahaul & Spiti","Mandi","Shimla","Sirmaur (Sirmour)","Solan","Una"]},
    {state:"Jharkhand", districts:["Bokaro","Chatra","Deoghar","Dhanbad","Dumka","East Singhbhum","Garhwa","Giridih","Godda","Gumla","Hazaribag","Jamtara","Khunti","Koderma","Latehar","Lohardaga","Pakur","Palamu","Ramgarh","Ranchi","Sahibganj","Seraikela-Kharsawan","Simdega","West Singhbhum"]},
    {state:"Karnataka", districts:["Bagalkot","Ballari (Bellary)","Belagavi (Belgaum)","Bengaluru (Bangalore) Rural","Bengaluru (Bangalore) Urban","Bidar","Chamarajanagar","Chikballapur","Chikkamagaluru (Chikmagalur)","Chitradurga","Dakshina Kannada","Davangere","Dharwad","Gadag","Hassan","Haveri","Kalaburagi (Gulbarga)","Kodagu","Kolar","Koppal","Mandya","Mysuru (Mysore)","Raichur","Ramanagara","Shivamogga (Shimoga)","Tumakuru (Tumkur)","Udupi","Uttara Kannada (Karwar)","Vijayapura (Bijapur)","Yadgir"]},
    {state:"Kerala", districts:["Alappuzha","Ernakulam","Idukki","Kannur","Kasaragod","Kollam","Kottayam","Kozhikode","Malappuram","Palakkad","Pathanamthitta","Thiruvananthapuram","Thrissur","Wayanad"]},
    {state:"Madhya Pradesh", districts:["Agar Malwa","Alirajpur","Anuppur","Ashoknagar","Balaghat","Barwani","Betul","Bhind","Bhopal","Burhanpur","Chhatarpur","Chhindwara","Damoh","Datia","Dewas","Dhar","Dindori","Guna","Gwalior","Harda","Hoshangabad","Indore","Jabalpur","Jhabua","Katni","Khandwa","Khargone","Mandla","Mandsaur","Morena","Narsinghpur","Neemuch","Panna","Raisen","Rajgarh","Ratlam","Rewa","Sagar","Satna","Sehore","Seoni","Shahdol","Shajapur","Sheopur","Shivpuri","Sidhi","Singrauli","Tikamgarh","Ujjain","Umaria","Vidisha"]},
    {state:"Maharashtra", districts:["Ahmednagar","Akola","Amravati","Aurangabad","Beed","Bhandara","Buldhana","Chandrapur","Dhule","Gadchiroli","Gondia","Hingoli","Jalgaon","Jalna","Kolhapur","Latur","Mumbai City","Mumbai Suburban","Nagpur","Nanded","Nandurbar","Nashik","Osmanabad","Palghar","Parbhani","Pune","Raigad","Ratnagiri","Sangli","Satara","Sindhudurg","Solapur","Thane","Wardha","Washim","Yavatmal"]},
    {state:"Tamil Nadu", districts:["Ariyalur","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Salem","Sivaganga","Thanjavur","Theni","Thoothukudi (Tuticorin)","Tiruchirappalli","Tirunelveli","Tiruppur","Tiruvallur","Tiruvannamalai","Tiruvarur","Vellore","Viluppuram","Virudhunagar"]},
    {state:"Telangana", districts:["Adilabad","Bhadradri Kothagudem","Hyderabad","Jagtial","Jangaon","Jayashankar Bhoopalpally","Jogulamba Gadwal","Kamareddy","Karimnagar","Khammam","Komaram Bheem Asifabad","Mahabubabad","Mahabubnagar","Mancherial","Medak","Medchal","Nagarkurnool","Nalgonda","Nirmal","Nizamabad","Peddapalli","Rajanna Sircilla","Rangareddy","Sangareddy","Siddipet","Suryapet","Vikarabad","Wanaparthy","Warangal (Rural)","Warangal (Urban)","Yadadri Bhuvanagiri"]},
    {state:"Uttar Pradesh", districts:["Agra","Aligarh","Allahabad","Ambedkar Nagar","Amethi (Chatrapati Sahuji Mahraj Nagar)","Amroha (J.P. Nagar)","Auraiya","Azamgarh","Baghpat","Bahraich","Ballia","Balrampur","Banda","Barabanki","Bareilly","Basti","Bhadohi","Bijnor","Budaun","Bulandshahr","Chandauli","Chitrakoot","Deoria","Etah","Etawah","Faizabad","Farrukhabad","Fatehpur","Firozabad","Gautam Buddha Nagar","Ghaziabad","Ghazipur","Gonda","Gorakhpur","Hamirpur","Hapur (Panchsheel Nagar)","Hardoi","Hathras","Jalaun","Jaunpur","Jhansi","Kannauj","Kanpur Dehat","Kanpur Nagar","Kanshiram Nagar (Kasganj)","Kaushambi","Kushinagar (Padrauna)","Lakhimpur - Kheri","Lalitpur","Lucknow","Maharajganj","Mahoba","Mainpuri","Mathura","Mau","Meerut","Mirzapur","Moradabad","Muzaffarnagar","Pilibhit","Pratapgarh","RaeBareli","Rampur","Saharanpur","Sambhal (Bhim Nagar)","Sant Kabir Nagar","Shahjahanpur","Shamali (Prabuddh Nagar)","Shravasti","Siddharth Nagar","Sitapur","Sonbhadra","Sultanpur","Unnao","Varanasi"]},
    {state:"West Bengal", districts:["Alipurduar","Bankura","Birbhum","Burdwan (Bardhaman)","Cooch Behar","Dakshin Dinajpur (South Dinajpur)","Darjeeling","Hooghly","Howrah","Jalpaiguri","Kalimpong","Kolkata","Malda","Murshidabad","Nadia","North 24 Parganas","Paschim Medinipur (West Medinipur)","Purba Medinipur (East Medinipur)","Purulia","South 24 Parganas","Uttar Dinajpur (North Dinajpur)"]}
  ];
  const stateSelect = document.getElementById("state");
  const districtSelect = document.getElementById("districtSelect");
  const stateError = document.getElementById("stateError");
  const thankYouMessage = document.querySelector(".thankyou");
  let selectedState;
  stateSelect.addEventListener("change", () => {
    selectedState = stateSelect.value;
    stateError.classList.add("hidden");
    const stateData = stateDistrictData.find(s => s.state === selectedState);
    districtSelect.innerHTML = '<option value="">Select District</option>';
    if (!selectedState) {
      stateError.classList.remove("hidden");
      return;
    }
    if (stateData) {
      stateData.districts.forEach(d => {
        const option = document.createElement("option");
        option.value = d;
        option.textContent = d;
        districtSelect.appendChild(option);
      });
    }
  });
  const fileInput = document.getElementById('storeImage');
  const fileNameDisplay = document.getElementById('fileName');

   fileInput.addEventListener('change', () => {
    const file = fileInput.files[0]; 
    if (file) {
      fileNameDisplay.textContent = `Selected file: ${file.name}`;
    } else {
      fileNameDisplay.textContent = '';
    }
  });
  

  const businessInput = document.querySelector(".businessWebsite");
  document.querySelectorAll("input[name='heard_from']").forEach(radio => {
    radio.addEventListener("change", () => {
      document.querySelectorAll(".checkbox-group label").forEach(label => {
        label.classList.remove("active");
      });
      if (radio.checked) {
        const label = radio.closest("label");
        if (label) {
          label.classList.add("active");
        }
      }
      if (radio.value === "Business Website (Specify)" && radio.checked) {
        businessInput.classList.remove("hidden");
      } else {
        businessInput.classList.add("hidden");
      }
    });
  });

  document.getElementById("franchiseForm").addEventListener("submit", async (event) => {
    event.preventDefault();
    const form = event.target;
    let valid = true;

    form.querySelectorAll(".error").forEach(el => el.classList.add("hidden"));

    // Required field validation
    form.querySelectorAll("[required]").forEach(input => {
      if (!input.checkValidity()) {
        valid = false;
        const errorEl = input.closest(".form-group").querySelector(".error");
        if (errorEl) errorEl.classList.remove("hidden");
      }
    });

    if (!selectedState) {
      stateError.classList.remove("hidden");
      return;
    }

    if (!districtSelect.value) {
      valid = false;
      districtSelect.closest(".form-group").querySelector(".error").textContent = "Please select a district";
    }

    const heardFrom = form.querySelector("input[name='heard_from']:checked");
    if (heardFrom && heardFrom.value === "Business Website (Specify)") {
      const customWebsite = businessInput.value.trim();
      if (!customWebsite) {
        valid = false;
        businessInput.closest(".form-group").querySelector(".error").textContent = "Please enter the website name";
      }
    }

    if (!valid) return;

    // Disable button + show loader
    const submitBtn = form.querySelector("button[type='submit']");
    submitBtn.disabled = true;
    submitBtn.textContent = "Submitting...";

    const formData = new FormData(form);
    if (heardFrom && heardFrom.value === "Business Website (Specify)") {
      formData.set("heard_from", businessInput.value.trim());
    }

    try {
      const response = await fetch("https://admin3157.gocolors.com/new_go_colors_india/public/api/franchise-enquiry", {
        method: "POST",
        body: formData
      });

      if (response.ok) {
        //alert("✅ Form submitted successfully!");
        document.querySelector('.form-container').classList.add('hidden');
        document.querySelector('.thankyou').classList.remove('hidden');
        document.querySelector('.page-heading').classList.add('hidden');
        form.reset();
        districtSelect.innerHTML = '<option value="">Select District</option>';
        businessInput.classList.add("hidden");
        setTimeout(() => {
          document.querySelector('.form-container').classList.remove('hidden');
          document.querySelector('.thankyou').classList.add('hidden');
          document.querySelector('.page-heading').classList.remove('hidden');
          setTimeout(() => {
            thankYouMessage.scrollIntoView({ behavior: "smooth", block: "center" });
          }, 200); 
        }, 5000);
      } else {
        const errorData = await response.json();
        alert("Error: " + JSON.stringify(errorData));
      }
    } catch (err) {
      console.error(err);
      alert("Something went wrong. Please try again.");
    } finally {
      // Re-enable button
      submitBtn.disabled = false;
      submitBtn.textContent = "Submit";
    }
  });
</script> {% endcomment %}
<script>
  $(document).ready(function(){
  document.querySelectorAll(".checkbox-group label").forEach(label => {
    label.classList.remove("active");
  });
  const stateDistrictData = [
    {state:"Andhra Pradesh", districts:["Anantapur","Chittoor","East Godavari","Guntur","Krishna","Kurnool","Nellore","Prakasam","Srikakulam","Visakhapatnam","Vizianagaram","West Godavari","YSR Kadapa"]},
    {state:"Arunachal Pradesh", districts:["Tawang","West Kameng","East Kameng","Papum Pare","Kurung Kumey","Kra Daadi","Lower Subansiri","Upper Subansiri","West Siang","East Siang","Siang","Upper Siang","Lower Siang","Lower Dibang Valley","Dibang Valley","Anjaw","Lohit","Namsai","Changlang","Tirap","Longding"]},
    {state:"Assam", districts:["Baksa","Barpeta","Biswanath","Bongaigaon","Cachar","Charaideo","Chirang","Darrang","Dhemaji","Dhubri","Dibrugarh","Goalpara","Golaghat","Hailakandi","Hojai","Jorhat","Kamrup Metropolitan","Kamrup","Karbi Anglong","Karimganj","Kokrajhar","Lakhimpur","Majuli","Morigaon","Nagaon","Nalbari","Dima Hasao","Sivasagar","Sonitpur","South Salmara-Mankachar","Tinsukia","Udalguri","West Karbi Anglong"]},
    {state:"Bihar", districts:["Araria","Arwal","Aurangabad","Banka","Begusarai","Bhagalpur","Bhojpur","Buxar","Darbhanga","East Champaran (Motihari)","Gaya","Gopalganj","Jamui","Jehanabad","Kaimur (Bhabua)","Katihar","Khagaria","Kishanganj","Lakhisarai","Madhepura","Madhubani","Munger (Monghyr)","Muzaffarpur","Nalanda","Nawada","Patna","Purnia (Purnea)","Rohtas","Saharsa","Samastipur","Saran","Sheikhpura","Sheohar","Sitamarhi","Siwan","Supaul","Vaishali","West Champaran"]},
    {state:"Chhattisgarh", districts:["Balod","Baloda Bazar","Balrampur","Bastar","Bemetara","Bijapur","Bilaspur","Dantewada (South Bastar)","Dhamtari","Durg","Gariyaband","Janjgir-Champa","Jashpur","Kabirdham (Kawardha)","Kanker (North Bastar)","Kondagaon","Korba","Korea (Koriya)","Mahasamund","Mungeli","Narayanpur","Raigarh","Raipur","Rajnandgaon","Sukma","Surajpur","Surguja"]},
    {state:"Goa", districts:["North Goa","South Goa"]},
    {state:"Gujarat", districts:["Ahmedabad","Amreli","Anand","Aravalli","Banaskantha (Palanpur)","Bharuch","Bhavnagar","Botad","Chhota Udepur","Dahod","Dangs (Ahwa)","Devbhoomi Dwarka","Gandhinagar","Gir Somnath","Jamnagar","Junagadh","Kachchh","Kheda (Nadiad)","Mahisagar","Mehsana","Morbi","Narmada (Rajpipla)","Navsari","Panchmahal (Godhra)","Patan","Porbandar","Rajkot","Sabarkantha (Himmatnagar)","Surat","Surendranagar","Tapi (Vyara)","Vadodara","Valsad"]},
    {state:"Haryana", districts:["Ambala","Bhiwani","Charkhi Dadri","Faridabad","Fatehabad","Gurgaon","Hisar","Jhajjar","Jind","Kaithal","Karnal","Kurukshetra","Mahendragarh","Mewat","Palwal","Panchkula","Panipat","Rewari","Rohtak","Sirsa","Sonipat","Yamunanagar"]},
    {state:"Himachal Pradesh", districts:["Bilaspur","Chamba","Hamirpur","Kangra","Kinnaur","Kullu","Lahaul & Spiti","Mandi","Shimla","Sirmaur (Sirmour)","Solan","Una"]},
    {state:"Jharkhand", districts:["Bokaro","Chatra","Deoghar","Dhanbad","Dumka","East Singhbhum","Garhwa","Giridih","Godda","Gumla","Hazaribag","Jamtara","Khunti","Koderma","Latehar","Lohardaga","Pakur","Palamu","Ramgarh","Ranchi","Sahibganj","Seraikela-Kharsawan","Simdega","West Singhbhum"]},
    {state:"Karnataka", districts:["Bagalkot","Ballari (Bellary)","Belagavi (Belgaum)","Bengaluru (Bangalore) Rural","Bengaluru (Bangalore) Urban","Bidar","Chamarajanagar","Chikballapur","Chikkamagaluru (Chikmagalur)","Chitradurga","Dakshina Kannada","Davangere","Dharwad","Gadag","Hassan","Haveri","Kalaburagi (Gulbarga)","Kodagu","Kolar","Koppal","Mandya","Mysuru (Mysore)","Raichur","Ramanagara","Shivamogga (Shimoga)","Tumakuru (Tumkur)","Udupi","Uttara Kannada (Karwar)","Vijayapura (Bijapur)","Yadgir"]},
    {state:"Kerala", districts:["Alappuzha","Ernakulam","Idukki","Kannur","Kasaragod","Kollam","Kottayam","Kozhikode","Malappuram","Palakkad","Pathanamthitta","Thiruvananthapuram","Thrissur","Wayanad"]},
    {state:"Madhya Pradesh", districts:["Agar Malwa","Alirajpur","Anuppur","Ashoknagar","Balaghat","Barwani","Betul","Bhind","Bhopal","Burhanpur","Chhatarpur","Chhindwara","Damoh","Datia","Dewas","Dhar","Dindori","Guna","Gwalior","Harda","Hoshangabad","Indore","Jabalpur","Jhabua","Katni","Khandwa","Khargone","Mandla","Mandsaur","Morena","Narsinghpur","Neemuch","Panna","Raisen","Rajgarh","Ratlam","Rewa","Sagar","Satna","Sehore","Seoni","Shahdol","Shajapur","Sheopur","Shivpuri","Sidhi","Singrauli","Tikamgarh","Ujjain","Umaria","Vidisha"]},
    {state:"Maharashtra", districts:["Ahmednagar","Akola","Amravati","Aurangabad","Beed","Bhandara","Buldhana","Chandrapur","Dhule","Gadchiroli","Gondia","Hingoli","Jalgaon","Jalna","Kolhapur","Latur","Mumbai City","Mumbai Suburban","Nagpur","Nanded","Nandurbar","Nashik","Osmanabad","Palghar","Parbhani","Pune","Raigad","Ratnagiri","Sangli","Satara","Sindhudurg","Solapur","Thane","Wardha","Washim","Yavatmal"]},
    {state:"Tamil Nadu", districts:["Ariyalur","Chennai","Coimbatore","Cuddalore","Dharmapuri","Dindigul","Erode","Kanchipuram","Kanyakumari","Karur","Krishnagiri","Madurai","Nagapattinam","Namakkal","Nilgiris","Perambalur","Pudukkottai","Ramanathapuram","Salem","Sivaganga","Thanjavur","Theni","Thoothukudi (Tuticorin)","Tiruchirappalli","Tirunelveli","Tiruppur","Tiruvallur","Tiruvannamalai","Tiruvarur","Vellore","Viluppuram","Virudhunagar"]},
    {state:"Telangana", districts:["Adilabad","Bhadradri Kothagudem","Hyderabad","Jagtial","Jangaon","Jayashankar Bhoopalpally","Jogulamba Gadwal","Kamareddy","Karimnagar","Khammam","Komaram Bheem Asifabad","Mahabubabad","Mahabubnagar","Mancherial","Medak","Medchal","Nagarkurnool","Nalgonda","Nirmal","Nizamabad","Peddapalli","Rajanna Sircilla","Rangareddy","Sangareddy","Siddipet","Suryapet","Vikarabad","Wanaparthy","Warangal (Rural)","Warangal (Urban)","Yadadri Bhuvanagiri"]},
    {state:"Uttar Pradesh", districts:["Agra","Aligarh","Allahabad","Ambedkar Nagar","Amethi (Chatrapati Sahuji Mahraj Nagar)","Amroha (J.P. Nagar)","Auraiya","Azamgarh","Baghpat","Bahraich","Ballia","Balrampur","Banda","Barabanki","Bareilly","Basti","Bhadohi","Bijnor","Budaun","Bulandshahr","Chandauli","Chitrakoot","Deoria","Etah","Etawah","Faizabad","Farrukhabad","Fatehpur","Firozabad","Gautam Buddha Nagar","Ghaziabad","Ghazipur","Gonda","Gorakhpur","Hamirpur","Hapur (Panchsheel Nagar)","Hardoi","Hathras","Jalaun","Jaunpur","Jhansi","Kannauj","Kanpur Dehat","Kanpur Nagar","Kanshiram Nagar (Kasganj)","Kaushambi","Kushinagar (Padrauna)","Lakhimpur - Kheri","Lalitpur","Lucknow","Maharajganj","Mahoba","Mainpuri","Mathura","Mau","Meerut","Mirzapur","Moradabad","Muzaffarnagar","Pilibhit","Pratapgarh","RaeBareli","Rampur","Saharanpur","Sambhal (Bhim Nagar)","Sant Kabir Nagar","Shahjahanpur","Shamali (Prabuddh Nagar)","Shravasti","Siddharth Nagar","Sitapur","Sonbhadra","Sultanpur","Unnao","Varanasi"]},
    {state:"West Bengal", districts:["Alipurduar","Bankura","Birbhum","Burdwan (Bardhaman)","Cooch Behar","Dakshin Dinajpur (South Dinajpur)","Darjeeling","Hooghly","Howrah","Jalpaiguri","Kalimpong","Kolkata","Malda","Murshidabad","Nadia","North 24 Parganas","Paschim Medinipur (West Medinipur)","Purba Medinipur (East Medinipur)","Purulia","South 24 Parganas","Uttar Dinajpur (North Dinajpur)"]}
  ];
  const stateSelect = document.getElementById("state");
  const districtSelect = document.getElementById("districtSelect");
  const stateError = document.getElementById("stateError");
  const thankYouMessage = document.querySelector(".thankyou");
  const fileInput = document.getElementById('storeImage');
  const fileNameDisplay = document.getElementById('fileName');
  stateSelect.addEventListener("change", () => {
    stateError.classList.add("hidden");
    const selectedState = stateSelect.value;
    districtSelect.innerHTML = '<option value="">Select District</option>';
    if (!selectedState) {
      stateError.classList.remove("hidden");
      return;
    }
    const stateData = stateDistrictData.find(s => s.state === selectedState);
    if (stateData) {
      stateData.districts.forEach(d => {
        const option = document.createElement("option");
        option.value = d;
        option.textContent = d;
        districtSelect.appendChild(option);
      });
    }
  });
  fileInput.addEventListener('change', () => {
    const files = Array.from(fileInput.files || []);
    if (files.length) {
      fileNameDisplay.textContent = `Selected files: ${files.map(f => f.name).join(', ')}`;
    } else {
      fileNameDisplay.textContent = '';
    }
  });
  const businessInput = document.querySelector(".businessWebsite");
  document.querySelectorAll("input[name='heard_from']").forEach(radio => {
    radio.addEventListener("change", () => {
      document.querySelectorAll(".checkbox-group label").forEach(label => {
        label.classList.remove("active");
      });
      if (radio.checked) {
        const label = radio.closest("label");
        if (label) label.classList.add("active");
      }
      if (radio.value === "Business Website (Specify)" && radio.checked) {
        businessInput.classList.remove("hidden");
      } else {
        businessInput.classList.add("hidden");
      }
    });
  });
  document.getElementById("franchiseForm").addEventListener("submit", async (event) => {
    event.preventDefault();
    const form = event.target;
    let valid = true;
    form.querySelectorAll(".error").forEach(el => el.classList.add("hidden"));
    form.querySelectorAll("[required]").forEach(input => {
      if (!input.checkValidity()) {
        valid = false;
        const errorEl = input.closest(".form-group")?.querySelector(".error");
        if (errorEl) errorEl.classList.remove("hidden");
      }
    });
    if (!stateSelect.value) {
      valid = false;
      stateError.classList.remove("hidden");
    }
    if (!districtSelect.value) {
      valid = false;
      const districtError = districtSelect.closest(".form-group")?.querySelector(".error");
      if (districtError) {
        districtError.textContent = "Please select a district";
        districtError.classList.remove("hidden");
      }
    }
    const heardFrom = form.querySelector("input[name='heard_from']:checked");
    if (heardFrom && heardFrom.value === "Business Website (Specify)") {
      const customWebsite = businessInput.value.trim();
      if (!customWebsite) {
        valid = false;
        const err = businessInput.closest(".form-group")?.querySelector(".error");
        if (err) {
          err.textContent = "Please enter the website name";
          err.classList.remove("hidden");
        }
      }
    }
    if (!(fileInput.files && fileInput.files.length)) {
      valid = false;
      const imgErr = fileInput.closest(".form-group")?.querySelector(".error");
      if (imgErr) imgErr.classList.remove("hidden");
    }
    if (!valid) return;
    const submitBtn = form.querySelector("button[type='submit']");
    submitBtn.disabled = true;
    submitBtn.textContent = "Submitting...";
    const formData = new FormData(form);
    if (heardFrom && heardFrom.value === "Business Website (Specify)") {
      formData.set("heard_from", businessInput.value.trim());
    }    const files = fileInput.files;
    for (let i = 0; i < files.length; i++) {
      formData.append('images[]', files[i], files[i].name);
    }
    const MAX_MB = 8;
    for (const f of files) {
      if (f.size > MAX_MB * 1024 * 1024) {
        alert(`"${f.name}" is larger than ${MAX_MB}MB`);
        submitBtn.disabled = false;
        submitBtn.textContent = "Submit";
        return;
      }
    }
    try {
      const response = await fetch("https://admin3157.gocolors.com/new_go_colors_india/public/api/franchise-enquiry", {
        method: "POST",
        body: formData // let browser set multipart boundary
      });

      if (response.ok) {
        document.querySelector('.form-container').classList.add('hidden');
        document.querySelector('.thankyou').classList.remove('hidden');
        document.querySelector('.page-heading').classList.add('hidden');

        form.reset();
        districtSelect.innerHTML = '<option value="">Select District</option>';
        businessInput.classList.add("hidden");
        fileNameDisplay.textContent = '';

        setTimeout(() => {
          document.querySelector('.form-container').classList.remove('hidden');
          document.querySelector('.thankyou').classList.add('hidden');
          document.querySelector('.page-heading').classList.remove('hidden');
          setTimeout(() => {
            thankYouMessage.scrollIntoView({ behavior: "smooth", block: "center" });
          }, 1000); 
        }, 5000);
        document.querySelectorAll(".checkbox-group label").forEach(label => {
          label.classList.remove("active");
        });
      } else {
        // Try to read JSON error; if not JSON, show text
        let errorText = 'Unknown error';
        try {
          const errorData = await response.json();
          errorText = JSON.stringify(errorData);
        } catch (e) {
          errorText = await response.text();
        }
        alert("Error: " + errorText);
      }
    } catch (err) {
      console.error(err);
      alert("Something went wrong. Please try again.");
    } finally {
      submitBtn.disabled = false;
      submitBtn.textContent = "Submit";
    }
  });

});
</script>


{% schema %}
{
  "name": "Franchies enquiry",
  "class": "page-width",
  "settings": [],
  "presets": [
    {
      "name": "Franchies enquiry",
    }
  ]

}
{% endschema %}